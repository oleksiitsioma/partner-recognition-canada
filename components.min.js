const e="bootstrapped";class t{static isElementBootstrapped(t){return t.classList.contains(e)}constructor(e,t){this.fdsElement=e,this.isIE11=this.isIE11(),this.fdsElement&&(t&&(this.fdsElement[t]=this),this.init())}init(){this.fdsElement.classList.add(e)}isIE11(){const e=window.navigator.userAgent;if(e.indexOf("Trident/")>0){const t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}return!1}removeChild(e){e&&e.parentNode&&e.remove()}createElement(e,t,s){const i=document.createElement(e);return t&&t.length&&(Array.isArray(t)?t.forEach((e=>{i.classList.add(e)})):i.classList.add(t)),s&&Object.entries(s).forEach((e=>{i.setAttribute(e[0],e[1])})),i}getElement(e){return this.element.querySelector(e)}getElements(e){return this.element.querySelectorAll(e)}get element(){return this.fdsElement}}const s="js-fmc-accordion",i="fmc-accordion__panel",n="fmc-accordion__button",o="fmc-accordion__body",l="fmc-accordion__content",a="fmc-accordion--active",r="fmc-accordion--expanded",c="aria-hidden",h="aria-expanded",d="home",m="end",u="prev",E="next",p="closing",b="opening",f="open",y="closed",g=38,P=40,v=37,L=39,T=9,w=13,A=36,S=35,C=32,_=27;class k extends t{static bootstrapComponents(){const e=[];return Array.prototype.forEach.call(document.querySelectorAll(`.${s}`),(s=>{t.isElementBootstrapped(s)||e.push(new k(s))})),e}init(){super.init(),this.accordionPanels=this.getElements(`.${i}`),this.currentPanelFocus=0,this.accordionPanels.forEach(((e,t)=>{e.buttonElement=e.querySelector(`.${n}`),e.bodyElement=e.querySelector(`.${o}`),e.contentElement=e.querySelector(`.${l}`),this.setPanelState(e,e.classList.contains(r)?f:y),e.buttonElement.addEventListener("click",(()=>this.onClick(e,t))),e.buttonElement.addEventListener("keyup",(e=>this.onKeyup(e))),e.buttonElement.addEventListener("keydown",(e=>this.onKeydown(e))),e.buttonElement.addEventListener("blur",(()=>this.onBlur(e))),e.bodyElement.addEventListener("transitionend",(t=>this.onTransitionEnd(e,t))),e.classList.contains(a)&&(this.currentPanelFocus=t,e.buttonElement.focus())}))}setPanelState(e,t){switch(e.state=t,t){case y:e.bodyElement.style.height=0,e.contentElement.style.visibility="hidden",e.buttonElement.setAttribute(h,"false"),e.buttonElement.setAttribute(c,"true");break;case p:e.bodyElement.style.height=`${e.contentElement.offsetHeight}px`,e.bodyElement.offsetHeight,e.bodyElement.style.height=0,e.contentElement.style.visibility="visible",e.buttonElement.setAttribute(h,"false"),e.buttonElement.setAttribute(c,"true");break;case b:e.bodyElement.style.height=`${e.contentElement.offsetHeight}px`,e.contentElement.style.visibility="visible",e.buttonElement.setAttribute(h,"true"),e.buttonElement.setAttribute(c,"false");break;case f:e.bodyElement.style.height="auto",e.contentElement.style.visibility="visible",e.buttonElement.setAttribute(h,"true"),e.buttonElement.setAttribute(c,"false")}}expandPanel(e){e.classList.add(r),e.state!==f&&this.setPanelState(e,b)}collapsePanel(e){e.classList.remove(r),e.state!==y&&this.setPanelState(e,p)}navigatePanels(e){switch(this.accordionPanels[this.currentPanelFocus].focused=!1,this.accordionPanels[this.currentPanelFocus].classList.remove(a),e){case d:this.currentPanelFocus=0;break;case m:this.currentPanelFocus=this.accordionPanels.length-1;break;case E:this.currentPanelFocus+=1;break;case u:this.currentPanelFocus-=1;break;default:this.currentPanelFocus=0}this.currentPanelFocus>this.accordionPanels.length-1&&(this.currentPanelFocus=0),this.currentPanelFocus<0&&(this.currentPanelFocus=this.accordionPanels.length-1),this.focus(this.accordionPanels[this.currentPanelFocus].querySelector(`.${n}`))}focus(e){const t=e.closest(`.${i}`);t.focused=!0,t.classList.add(a),e.focus()}onLoad(e){e.classList.contains(r)?this.expandPanel(e):this.collapsePanel(e)}onClick(e,t){this.currentPanelFocus=t,e.classList.add(a),e.classList.contains(r)?this.collapsePanel(e):this.expandPanel(e)}onBlur(e){e.classList.remove(a),e.focused=!1}onKeyup(e){switch(e.keyCode){case T:this.focus(e.target);break;case C:e.preventDefault()}}onKeydown(e){switch(e.keyCode){case w:case C:e.preventDefault(),e.target.click();break;case v:case g:e.preventDefault(),this.navigatePanels(u);break;case L:case P:e.preventDefault(),this.navigatePanels(E);break;case S:e.preventDefault(),this.navigatePanels(m);break;case A:e.preventDefault(),this.navigatePanels(d)}}onTransitionEnd(e,t){t.target===e.bodyElement&&(e.state===p?this.setPanelState(e,y):this.setPanelState(e,f))}expandAll(){this.accordionPanels.forEach((e=>{e.state===y&&this.expandPanel(e)}))}collapseAll(){this.accordionPanels.forEach((e=>{e.state===f&&this.collapsePanel(e)}))}}const O="js-fmc-tabs",x="fmc-tabs--vertical",B="fmc-tabs__tablist-wrapper",I="fmc-tabs__tablist",$="fmc-tabs__tab",N="fmc-tabs__tab-border",R="fmc-tabs__tabpanels",M="fmc-tabs__tabpanel",D="fmc-tabs__tab--active",q="fmc-tabs__tabpanel--active",F="fmc-tabs__tabpanel--focus",K="aria-selected",U="aria-controls",H="tabindex",W=37,z=39,G=9,j=36,X=35;class Y extends t{static bootstrapComponents(){const e=[];return Array.prototype.forEach.call(document.querySelectorAll(`.${O}`),(s=>{t.isElementBootstrapped(s)||e.push(new Y(s))})),e}init(){super.init(),this.tabListWrapperElement=this.fdsElement.querySelector(`.${B}`),this.tabListElement=this.fdsElement.querySelector(`.${I}`),this.tabElements=this.fdsElement.querySelectorAll(`.${$}`),this.tabBorderElement=this.fdsElement.querySelector(`.${N}`),this.tabPanelsElement=this.fdsElement.querySelector(`.${R}`),this.tabPanelElements=this.fdsElement.querySelectorAll(`.${M}`),this.tabElements.length>0&&(this.horizontal=!0,this.vertical=this.fdsElement.classList.contains(x),[...this.tabElements].forEach((e=>{e.addEventListener("click",this.tabClickHandler=e=>this.onTabClick(e)),e.addEventListener("keydown",this.tabKeydownHandler=e=>this.onTabKeydown(e))})),[...this.tabPanelElements].forEach((e=>{e.addEventListener("keydown",this.tabPanelKeydownHandler=e=>this.onTabPanelKeydown(e)),e.addEventListener("blur",this.tabPanelBlurHandler=e=>this.onTabPanelBlur(e))})),this.tabSelectedElement=[...this.tabElements].find((e=>"true"===e.getAttribute(K).toLowerCase())),this.activateTab(this.tabSelectedElement),document.fonts.ready.then((()=>{this.setSelectedTabBorder(this.tabSelectedElement)})))}findSelectedIndex(e){this.selectedTabIndex=[...this.tabElements].findIndex((t=>t===e.target))}focusTab(e){e.focus(),e.click(),e.scrollIntoView()}setSelectedTabBorder(e){const t=`${e.getBoundingClientRect().width}px`;let s;this.tabBorderElementPos=this.tabBorderElement.offsetLeft,s=0===e.offsetLeft?"0px":`${this.tabBorderElementPos+e.offsetLeft}px`,this.tabListWrapperElement.style.setProperty("--tab-selected-border-transform",`translateX(${s})`),this.tabListWrapperElement.style.setProperty("--tab-selected-border-width",t),this.tabListWrapperElement.style.setProperty("--tab-selected-border-display","block")}activateTab(e){this.deactivateTabs(),e.setAttribute(K,"true"),e.setAttribute(H,0),e.classList.add(D);const t=e.getAttribute(U);this.panelSelectedElement=this.fdsElement.querySelector(`#${t}`),this.panelSelectedElement.classList.add(q)}deactivateTabs(){[...this.tabElements].forEach((e=>{e.setAttribute(K,"false"),e.setAttribute(H,-1),e.classList.remove(D)})),[...this.tabPanelElements].forEach((e=>{e.classList.remove(q)}))}onTabClick(e){this.findSelectedIndex(e),this.activateTab(e.target,!1),this.setSelectedTabBorder(e.target)}onTabPanelBlur(e){e.target.classList.remove(F)}onTabKeydown(e){switch(e.keyCode){case G:e.preventDefault(),this.findSelectedIndex(e);break;case X:e.preventDefault(),this.selectedTabIndex=this.tabElements.length-1;break;case j:e.preventDefault(),this.selectedTabIndex=0;break;case z:e.preventDefault(),this.selectedTabIndex===this.tabElements.length-1?this.selectedTabIndex=0:this.selectedTabIndex+=1;break;case W:e.preventDefault(),0===this.selectedTabIndex?this.selectedTabIndex=this.tabElements.length-1:this.selectedTabIndex-=1;break;default:return}this.focusTab(this.tabElements[this.selectedTabIndex])}onTabPanelKeydown(e){if(e.keyCode===G)e.preventDefault(),e.target.classList.add(F)}}const V={COMPONENT:"js-fmc-tooltip",TOOLTIP:"fmc-tooltip",POPUP_TOOLTIP:"fmc-tooltip--popup",TRIGGER:"fmc-tooltip__trigger",CONTENT:"fmc-tooltip__content",WRAPPER:"fmc-tooltip__wrapper",POINTER:"fmc-tooltip__pointer",POINTER_FIX:"fmc-tooltip__pointer-fix",OPENED:"fmc-tooltip--opened",FOCUSED:"fmc-tooltip--focused",TOP:"fmc-tooltip--top",RIGHT:"fmc-tooltip--right",BOTTOM:"fmc-tooltip--bottom",LEFT:"fmc-tooltip--left",MEASURE:"fmc-tooltip__content--measure",CLOSE_BTN:"fmc-tooltip__close",CLEAR_ICON:"fds-font--ford-icons__clear",FDS_ICON:"fds-icon",HEADER:"fmc-tooltip__header",BODY:"fmc-tooltip__body",MOBILE:"fmc-tooltip--mobile"},J="data-position",Q="data-slug",Z="data-popup-tip";class ee extends t{static bootstrapComponents(){const e=[];return Array.prototype.forEach.call(document.querySelectorAll(`.${V.COMPONENT}`),(s=>{t.isElementBootstrapped(s)||e.push(new ee(s))})),e}init(){super.init(),this.focusableSelector="body, a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",this.slug=this.fdsElement.getAttribute(Q),this.position=this.fdsElement.getAttribute(J),this.isPopupTip=this.fdsElement.hasAttribute(Z),this.opened=!1,this.mq={small:"(max-width: 600px)"},this.triggerElement=this.getElement(`.${V.TRIGGER}`),this.wrapperElement=this.getElement(`.${V.WRAPPER}`),this.contentElement=this.getElement(`.${V.CONTENT}`),this.isPopupTip&&(this.headerElement=this.getElement(`.${V.HEADER}`),this.bodyElement=this.getElement(`.${V.BODY}`)),this.appendPointer(),"auto"===this.position?setTimeout((()=>{this.autoPosition()}),1):this.setPosition(this.position),setTimeout((()=>{this.shiftOffScreenContent()}),500),this.isPopupTip&&(this.fdsElement.classList.add(V.POPUP_TOOLTIP),this.addCloseBtn(),this.determineMobile()),this.addA11yAttributes(),this.focusableElements=this.contentElement.querySelectorAll(this.focusableSelector),this.onKeyUp=e=>this.handleKeyUp(e),this.onTriggerUp=e=>this.handleTriggerUp(e),this.onClick=()=>this.handleClick(),this.onBlur=()=>this.handleBlur(),this.onMouseover=()=>this.handleMouseover(),this.onMouseout=()=>this.handleMouseout(),this.onResize=()=>this.determineMobile(),this.isPopupTip&&window.addEventListener("resize",this.onResize),this.initEventListeners()}initEventListeners(){this.fdsElement.addEventListener("keyup",this.onKeyUp),this.triggerElement.addEventListener("keyup",this.onTriggerUp),this.isPopupTip?this.triggerElement.addEventListener("click",this.onClick):(this.triggerElement.addEventListener("mouseover",this.onMouseover),this.triggerElement.addEventListener("mouseout",this.onMouseout),this.triggerElement.addEventListener("blur",this.onBlur))}destroyEventListeners(){this.fdsElement.removeEventListener("keyup",this.onKeyUp),this.triggerElement.removeEventListener("keyup",this.onTriggerUp),this.triggerElement.removeEventListener("blur",this.onBlur),window.removeEventListener("resize",this.onResize),this.isPopupTip?this.triggerElement.removeEventListener("click",this.onClick):(this.triggerElement.removeEventListener("mouseover",this.onMouseover),this.triggerElement.removeEventListener("mouseout",this.onMouseout))}measureWidth(){const e=this.contentElement.innerText,t=document.createElement("div");t.innerText=e,t.classList.add(V.CONTENT),t.classList.add(V.MEASURE),this.fdsElement.appendChild(t);const s=window.getComputedStyle(this.fdsElement.querySelector(`.${V.MEASURE}`));this.wrapperElement.style.width=s.width,t.remove()}autoPosition(){this.removePositions(),this.setPosition("top");let e=this.wrapperElement.getBoundingClientRect();e.top<0&&(e=this.wrapperElement.getBoundingClientRect(),this.removePositions(),this.setPosition("right")),e.right>window.innerWidth&&(e=this.wrapperElement.getBoundingClientRect(),this.removePositions(),this.setPosition("bottom")),e.bottom>window.innerHeight&&e.right>window.innerWidth&&(e=this.wrapperElement.getBoundingClientRect(),this.removePositions(),this.setPosition("left"))}setPosition(e){this.fdsElement.classList.add(V[e.toUpperCase()])}removePositions(){this.fdsElement.classList.remove(V.TOP),this.fdsElement.classList.remove(V.RIGHT),this.fdsElement.classList.remove(V.BOTTOM),this.fdsElement.classList.remove(V.LEFT)}shiftOffScreenContent(){this.contentElement.style.removeProperty("top"),this.contentElement.style.removeProperty("right"),this.contentElement.style.removeProperty("bottom"),this.contentElement.style.removeProperty("left");const e=this.contentElement.getBoundingClientRect();window.matchMedia(this.mq.small).matches||(e.top<0?this.contentElement.style.top=`${Math.abs(e.top)}px`:this.contentElement.style.removeProperty("top"),window.innerWidth-e.right<0?this.contentElement.style.right=`${Math.abs(window.innerWidth-e.right)}px`:this.contentElement.style.removeProperty("right"),e.bottom>window.innerHeight?this.contentElement.style.bottom=`${Math.abs(e.bottom-window.innerHeight)}px`:this.contentElement.style.removeProperty("bottom"),e.left<0?this.contentElement.style.left=`${Math.abs(e.left)}px`:this.contentElement.style.removeProperty("left"))}handleKeyUp(e){e&&e.keyCode===_&&(this.close(),this.triggerElement.focus()),e&&!this.opened&&e.keyCode===w&&this.triggerElement.focus()}handleTriggerUp(e){e&&e.keyCode===T&&(this.isPopupTip||this.open()),e&&e.keyCode===w&&this.closeBTN.focus(),e&&e.keyCode===C&&this.closeBTN.focus()}handleFocusableDown(e){const t=this.focusableElements[0],s=this.focusableElements[this.focusableElements.length-1];e.keyCode===T&&(e.shiftKey&&document.activeElement===t?(e.preventDefault(),s.focus()):e.shiftKey||document.activeElement!==s||(e.preventDefault(),t.focus()))}addA11yAttributes(){this.wrapperElement.setAttribute("id",this.slug),this.wrapperElement.setAttribute("aria-hidden","true"),this.contentElement.querySelectorAll(this.focusableSelector).forEach((e=>{e.setAttribute("tabindex","-1")})),this.isPopupTip?(this.wrapperElement.setAttribute("role","dialog"),this.headerElement.setAttribute("id",`${this.slug}-header`),this.bodyElement.setAttribute("id",`${this.slug}-body`),this.wrapperElement.setAttribute("aria-modal","true"),this.wrapperElement.setAttribute("aria-labelledby",`${this.slug}-header`),this.wrapperElement.setAttribute("aria-describedby",`${this.slug}-body`)):(this.wrapperElement.setAttribute("role","tooltip"),this.triggerElement.setAttribute("aria-describedby",this.slug))}appendPointer(){const e=document.createElement("span"),t=document.createElement("span");e.classList.add(V.POINTER),t.classList.add(V.POINTER_FIX),this.wrapperElement.appendChild(e),this.fdsElement.querySelector(`.${V.POINTER}`).appendChild(t)}addCloseBtn(){const e=document.createElement("button");e.classList.add(V.CLOSE_BTN),e.classList.add(V.CLEAR_ICON),e.classList.add(V.FDS_ICON),e.setAttribute("aria-label","close tooltip"),this.contentElement.appendChild(e),this.closeBTN=this.fdsElement.querySelector(`.${V.CLOSE_BTN}`),this.closeBTN.addEventListener("click",(()=>{this.close(),this.triggerElement.focus()}))}determineMobile(){this.isPopupTip&&window.matchMedia(this.mq.small).matches?(this.fdsElement.classList.add(V.MOBILE),this.shiftOffScreenContent()):(this.fdsElement.classList.remove(V.MOBILE),this.shiftOffScreenContent())}open(){this.opened=!0,this.fdsElement.classList.add(V.OPENED),this.wrapperElement.setAttribute("aria-hidden","false"),this.contentElement.querySelectorAll(this.focusableSelector).forEach((e=>{e.setAttribute("tabindex","0")}))}close(){this.opened=!1,this.fdsElement.classList.remove(V.OPENED),this.wrapperElement.setAttribute("aria-hidden","true"),this.contentElement.querySelectorAll(this.focusableSelector).forEach((e=>{e.setAttribute("tabindex","-1")}))}handleClick(){this.fdsElement.classList.contains(V.OPENED)?(this.close(),this.triggerElement.focus()):("auto"===this.position&&this.autoPosition(),this.shiftOffScreenContent(),this.open()),this.focusableElements.forEach((e=>{e.addEventListener("keydown",(e=>this.handleFocusableDown(e)))}))}handleBlur(){this.close()}handleMouseover(){this.measureWidth(),this.open()}handleMouseout(){this.close()}}export{k as FMCAccordion,Y as FMCTabs,ee as FMCTooltip};
//# sourceMappingURL=components.min.js.map
